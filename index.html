<!DOCTYPE html>
<html lang="es">
<head>
    <script>
        // Este script fuerza la creaci√≥n de la funci√≥n randomUUID si el navegador no la tiene
        // o si est√° bloqueada por falta de HTTPS.
        (function() {
            if (!window.crypto) { window.crypto = {}; }
            if (!window.crypto.randomUUID) {
                console.log("Aplicando parche de seguridad para randomUUID...");
                window.crypto.randomUUID = function() {
                    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
                        return v.toString(16);
                    });
                };
            }
        })();
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Carreras con Futuro | Isthmus - Strategic Vision</title>
    <meta name="description" content="Gu√≠a estrat√©gica para padres sobre el futuro profesional de sus hijos en la econom√≠a creativa.">
    
    <script src="https://cdn.platform.openai.com/deployments/chatkit/chatkit.js" async></script>
    <meta name="chatkit:domain_public_key" content="domain_pk_68e7da3b8b38819099c41f6a597d5cdf00560b7a3fd09ef4" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        /* --- VARIABLES & RESET --- */
        :root {
            --bg-main: #FFFFFF;
            --bg-secondary: #F5F5F7;
            --text-main: #1D1D1F;
            --text-light: #86868B;
            --accent-blue: #0066CC;
            --accent-green: #34C759;
            --white: #FFFFFF;
            --card-radius: 24px;
            --card-radius-mobile: 16px;

            /* Chatbot Vars */
            --fab: #1D1D1F; 
            --chat-gap: 20px; 
            --chat-size: 56px; 
            --chat-shadow: 0 12px 30px rgba(0,0,0,.15);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-main);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        a { text-decoration: none; transition: all 0.3s ease; }
        ul { list-style: none; }
        img { max-width: 100%; display: block; }
        input, button { font-family: 'Inter', sans-serif; }

        /* --- UTILITIES --- */
        .container { max-width: 1280px; margin: 0 auto; padding: 0 30px; }
        .text-center { text-align: center; }
        
        .section-heading {
            margin-bottom: 60px;
            max-width: 800px;
            margin-left: auto; margin-right: auto;
        }
        .section-heading h2 {
            font-size: 3.5rem; font-weight: 700; letter-spacing: -0.02em; line-height: 1.1; margin-bottom: 20px;
        }
        .section-heading p {
            font-size: 1.25rem; color: var(--text-light);
        }

        /* --- HEADER --- */
        header {
            position: fixed; top: 0; width: 100%; z-index: 1000;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        .nav-content {
            height: 70px; display: flex; justify-content: space-between; align-items: center; position: relative;
        }
        .logo { font-weight: 800; font-size: 1.3rem; letter-spacing: -0.02em; color: #000; z-index: 1001; }
        
        .menu-toggle { display: none; flex-direction: column; cursor: pointer; gap: 5px; z-index: 1001; }
        .bar { width: 25px; height: 2px; background-color: #000; transition: 0.3s; }
        #mobile-menu-check { display: none; }
        .nav-links { display: flex; }
        .nav-links a { font-size: 0.95rem; font-weight: 500; color: var(--text-main); margin-left: 32px; }
        .nav-links a:hover { color: var(--accent-blue); }

        /* --- HERO SECTION --- */
        .hero {
            height: 90vh; 
            min-height: 600px;
            position: relative;
            display: flex; align-items: center; justify-content: center;
            text-align: center; color: var(--white);
            margin: 10px; border-radius: var(--card-radius);
            overflow: hidden;
            background-color: #000;
            margin-top: 80px; /* Offset fixed header */
        }
        .hero-bg-img {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            object-fit: cover; z-index: 0;
            background-image: url('https://images.unsplash.com/photo-1523580846011-d3a5bc25702b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
            background-position: center;
            filter: brightness(0.4); 
        }
        .hero-content {
            position: relative; z-index: 2; max-width: 900px; padding: 20px;
            animation: fadeUp 1s ease-out;
        }
        .hero h1 {
            font-size: 4.5rem; font-weight: 800; line-height: 1.05; letter-spacing: -0.03em; margin-bottom: 1.5rem;
        }
        .hero p {
            font-size: 1.4rem; font-weight: 400; color: rgba(255,255,255,0.95); margin-bottom: 3rem; max-width: 700px; margin-left: auto; margin-right: auto;
        }
        .btn-main {
            background-color: var(--white); color: #000;
            padding: 16px 32px; border-radius: 100px; font-size: 1.1rem; font-weight: 600;
            display: inline-block; transition: transform 0.2s;
            cursor: pointer; border: none;
        }
        .btn-main:hover { transform: scale(1.05); }

        /* --- SECTION: INVESTMENT COMPARISON --- */
        .investment-section { padding: 100px 0; background: var(--bg-main); }
        .comparison-container { display: flex; gap: 30px; justify-content: center; margin-top: 50px; flex-wrap: wrap; }
        .comparison-card {
            flex: 1; min-width: 300px; max-width: 500px; padding: 40px; border-radius: var(--card-radius);
            background: var(--bg-secondary); transition: transform 0.3s;
        }
        .comparison-card.highlight {
            background: #111; color: #fff; box-shadow: 0 25px 50px rgba(0,0,0,0.15); transform: scale(1.05); position: relative; z-index: 2;
        }
        .comp-title { font-size: 1.3rem; font-weight: 700; margin-bottom: 25px; display: block; border-bottom: 1px solid rgba(0,0,0,0.1); padding-bottom: 15px; }
        .highlight .comp-title { border-bottom: 1px solid rgba(255,255,255,0.2); }
        .comp-list li { margin-bottom: 15px; padding-left: 30px; position: relative; font-size: 1.05rem; }
        .comparison-card:not(.highlight) .comp-list li { color: var(--text-light); }
        .check-icon { position: absolute; left: 0; color: #34C759; font-weight: bold; }
        .cross-icon { position: absolute; left: 0; color: #FF3B30; font-weight: bold; }

        /* --- ROADMAP SECTION --- */
        .roadmap-section { padding: 120px 0; background: var(--bg-secondary); }
        .timeline-wrapper { 
            display: flex; justify-content: space-between; margin-top: 60px; position: relative; padding: 0 20px;
        }
        .timeline-wrapper::before {
            content: ''; position: absolute; top: 40px; left: 0; right: 0; height: 2px; background: #ddd; z-index: 0;
        }
        .timeline-step { 
            flex: 1; text-align: center; position: relative; z-index: 1; padding: 0 15px;
        }
        .step-circle {
            width: 80px; height: 80px; background: #fff; border: 2px solid #000; border-radius: 50%;
            margin: 0 auto 20px; display: flex; align-items: center; justify-content: center;
            font-size: 2rem; box-shadow: 0 10px 20px rgba(0,0,0,0.05); font-weight: 700;
        }
        .step-title { font-weight: 700; font-size: 1.1rem; margin-bottom: 10px; }
        .step-desc { font-size: 0.9rem; color: var(--text-light); line-height: 1.4; }

        /* --- BENTO GRID (CARRERAS) --- */
        .careers-section { padding: 120px 0; background: var(--white); }
        .bento-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; }
        .bento-card {
            position: relative; height: 500px; border-radius: var(--card-radius); overflow: hidden;
            color: var(--white); cursor: pointer; background-color: #1a1a1a;
        }
        .card-bg {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s ease; opacity: 0.85;
        }
        .bento-card:hover .card-bg { transform: scale(1.05); }
        .card-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to top, rgba(0,0,0,0.95) 20%, rgba(0,0,0,0.4) 60%, transparent);
        }
        .card-content { position: absolute; bottom: 0; left: 0; padding: 40px; z-index: 10; width: 100%; }
        .industry-tag {
            font-size: 0.75rem; background: #000; color: #fff; padding: 6px 12px; border-radius: 4px; 
            text-transform: uppercase; letter-spacing: 1px; margin-bottom: 15px; display: inline-block; font-weight: 600;
        }
        .card-title { font-size: 2.2rem; font-weight: 700; margin-bottom: 10px; line-height: 1.1; }
        .card-desc { font-size: 1rem; color: rgba(255,255,255,0.9); margin-bottom: 25px; line-height: 1.4; }
        .card-link-btn {
            background: #fff; color: #000; padding: 12px 24px; border-radius: 50px; font-size: 0.9rem; font-weight: 600;
            display: inline-flex; align-items: center; transition: background 0.3s;
        }
        .card-link-btn:hover { background: #eee; }

        /* --- TESTIMONIALS SECTION --- */
        .testimonials-section { padding: 100px 0; background-color: var(--bg-secondary); }
        .testimonial-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; }
        .testi-card { 
            padding: 40px; border-radius: var(--card-radius); display: flex; flex-direction: column; justify-content: space-between;
        }
        .quote-icon { font-family: serif; font-size: 4rem; line-height: 0.5; margin-bottom: 20px; }
        
        /* --- FORM SECTION (LEAD MAGNET) --- */
        .report-section {
            padding: 100px 0; background: #000; color: #fff; position: relative; overflow: hidden;
        }
        .report-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 60px; align-items: center; }
        
        .report-form-card {
            background: #1A1A1A; padding: 40px; border-radius: 20px; border: 1px solid #333;
        }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; font-size: 0.9rem; margin-bottom: 8px; color: #ccc; }
        .form-input {
            width: 100%; padding: 15px; background: #000; border: 1px solid #333; border-radius: 8px;
            color: #fff; font-size: 1rem; outline: none; transition: border 0.3s;
        }
        .form-input:focus { border-color: var(--accent-blue); }
        .form-btn {
            width: 100%; padding: 18px; background: var(--accent-green); border: none; border-radius: 8px;
            color: #fff; font-weight: 700; font-size: 1rem; cursor: pointer; transition: background 0.3s;
        }
        .form-btn:hover { background: #2da84e; }
        .form-btn:disabled { background: #444; cursor: not-allowed; }
        .form-note { font-size: 0.8rem; color: #666; margin-top: 15px; text-align: center; }

        .success-message {
            display: none; text-align: center; padding: 40px; animation: fadeIn 0.5s;
        }
        .success-icon { font-size: 3rem; color: var(--accent-green); margin-bottom: 20px; display: block; }

        .download-badge {
            background: var(--accent-green); color: #fff; padding: 8px 16px; border-radius: 20px; 
            font-size: 0.8rem; font-weight: 600; margin-bottom: 20px; display: inline-block;
        }

        /* --- NETWORKING & SOCIAL PROOF --- */
        .networking-section { padding: 120px 0; background: var(--bg-main); }
        .networking-split { display: flex; align-items: center; gap: 60px; }
        .networking-visual { flex: 1; height: 500px; border-radius: var(--card-radius); overflow: hidden; }
        .networking-visual img { width: 100%; height: 100%; object-fit: cover; }
        .networking-text { flex: 1; }
        
        .social-proof-section { padding: 80px 0; background: var(--white); overflow: hidden; border-top: 1px solid #eee; }
        .logo-marquee {
            white-space: nowrap; overflow: hidden; margin-bottom: 60px; position: relative;
            mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
            -webkit-mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
        }
        .logo-track { display: inline-block; animation: scroll 35s linear infinite; }
        .company-logo {
            display: inline-block; margin: 0 40px; opacity: 0.5; filter: grayscale(100%);
            font-size: 1.4rem; font-weight: 800; text-transform: uppercase; color: #000;
        }
        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* --- MAP SECTION --- */
        .map-section { background: #0b0b0d; color: #fff; padding: 140px 0; position: relative; }
        .map-wrapper { max-width: 1000px; margin: 40px auto; position: relative; height: 500px; display: flex; align-items: center; justify-content: center; }
        .map-image-bg {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80'); 
            background-size: cover; background-position: center;
            opacity: 0.3; filter: grayscale(100%) contrast(1.2);
        }
        .big-stat { position: relative; z-index: 10; text-align: center; width: 100%; }
        .stat-number { 
            font-size: 8rem; font-weight: 800; line-height: 1;
            background: linear-gradient(to bottom right, #ffffff, #666666);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        .stat-desc { font-size: 1.2rem; text-transform: uppercase; letter-spacing: 3px; color: #888; }

        /* --- FOOTER --- */
        footer { background: #111; color: #888; padding: 80px 0; text-align: center; }
        .footer-links a { margin: 0 20px; color: #fff; font-weight: 500; font-size: 0.9rem; }
        .footer-links a:hover { color: #ccc; }
        
        /* --- RESPONSIVE --- */
        @media (max-width: 1024px) {
            .hero h1 { font-size: 4rem; }
            .timeline-wrapper { flex-wrap: wrap; justify-content: center; gap: 30px; }
            .timeline-wrapper::before { display: none; }
            .timeline-step { flex: 0 0 45%; margin-bottom: 20px; }
            .report-grid { grid-template-columns: 1fr; }
            .testimonial-grid { grid-template-columns: 1fr; } /* Stack testimonials */
        }

        @media (max-width: 768px) {
            .container { padding: 0 24px; }
            .menu-toggle { display: flex; }
            .nav-links {
                position: absolute; top: 70px; left: 0; width: 100%; background: white; flex-direction: column; padding: 30px 0;
                transform: translateY(-150%); transition: transform 0.3s ease; z-index: 999; box-shadow: 0 10px 20px rgba(0,0,0,0.05);
            }
            #mobile-menu-check:checked ~ .nav-links { transform: translateY(0); }
            
            .hero h1 { font-size: 3rem; }
            .comparison-container { flex-direction: column; }
            .timeline-step { flex: 0 0 100%; }
            .bento-grid { grid-template-columns: 1fr; }
            .bento-card { height: 450px; }
            
            /* Mobile adjustment for overlay text visibility */
            .card-overlay { background: linear-gradient(to top, rgba(0,0,0,0.95) 30%, rgba(0,0,0,0.2) 70%, transparent); }

            .networking-split { flex-direction: column; }
            .networking-visual { width: 100%; height: 300px; }
            
            .logo-marquee { margin-bottom: 40px; }
            .company-logo { font-size: 1.1rem; margin: 0 20px; }
            .stat-number { font-size: 5rem; }
        }
        
        @media (max-width: 480px) {
            .hero h1 { font-size: 2.5rem; }
            .section-heading h2 { font-size: 2.2rem; }
        }

        /* --- 2. CHAT STYLES (Integrados para el nuevo index) --- */
        #chat-shell {
            position: fixed; right: 20px; bottom: calc(var(--chat-gap) + var(--chat-size) + 12px);
            width: 360px; height: 600px; display: none;
            background: #fff; border-radius: 24px; overflow: hidden; 
            box-shadow: 0 20px 80px rgba(0,0,0,0.2); z-index: 9999;
            border: 1px solid rgba(0,0,0,0.05);
        }
        #chat-launcher {
            position: fixed; right: var(--chat-gap); bottom: var(--chat-gap);
            width: var(--chat-size); height: var(--chat-size); border-radius: 50%; border: none; cursor: pointer; z-index: 10000;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2); background: var(--fab); color: #fff; font-size: 24px;
            display: inline-flex; align-items: center; justify-content: center; 
            transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1);
        }
        #chat-launcher:hover { transform: scale(1.1); }
        #chat-launcher.hidden { opacity: 0; pointer-events: none; transform: scale(0.5); }
        @media (max-width: 480px){
            #chat-shell{ width: 100vw; height: 100dvh; right: 0; left: 0; bottom: 0; border-radius: 0; }
        }
    </style>
</head>
<body>

    <header>
        <div class="container nav-content">
            <div class="logo">ISTHMUS | Parents</div>
            <input type="checkbox" id="mobile-menu-check">
            <label for="mobile-menu-check" class="menu-toggle">
                <span class="bar"></span><span class="bar"></span><span class="bar"></span>
            </label>
            <nav class="nav-links">
                <a href="#inversion">Estrategia</a>
                <a href="#carreras">Carreras</a>
                <a href="#testimonios">Resultados</a>
                <a href="#reporte">Reporte 2030</a>
            </nav>
        </div>
    </header>

    <section class="hero">
        <div class="hero-bg-img"></div>
        <div class="hero-content">
            <h1>Global Mindset.<br>Local Roots.</h1>
            <p>La estrategia financiera y educativa para familias que construyen legado. Conecte el talento global de su hijo con el mercado local.</p>
            <a href="#inversion" class="btn-main">Ver An√°lisis de Inversi√≥n</a>
        </div>
    </section>

    <section id="inversion" class="investment-section">
        <div class="container">
            <div class="section-heading text-center">
                <h2>Decisiones Basadas en Valor</h2>
                <p>Estudiar fuera es una experiencia de vida. Estudiar en Isthmus es una estrategia de mercado inteligente.</p>
            </div>
            
            <div class="comparison-container">
                <div class="comparison-card">
                    <span class="comp-title" style="color:#999;">Opci√≥n A: Pregrado en el Extranjero</span>
                    <ul class="comp-list">
                        <li><span class="cross-icon">‚úï</span> Inversi√≥n Alta ($200k+) sin ROI inmediato local</li>
                        <li><span class="cross-icon">‚úï</span> <strong>P√©rdida de Capital Relacional</strong> (Networking nulo en Panam√°)</li>
                        <li><span class="cross-icon">‚úï</span> Retorno al pa√≠s como "desconocido" a los 24 a√±os</li>
                    </ul>
                </div>
                <div class="comparison-card highlight">
                    <span class="comp-title">Opci√≥n B: El Modelo Isthmus</span>
                    <ul class="comp-list">
                        <li><span class="check-icon">‚úì</span> Optimizaci√≥n de capital para Posgrado futuro</li>
                        <li><span class="check-icon">‚úì</span> Construcci√≥n de <strong>Red de Poder Local</strong> desde el a√±o 1</li>
                        <li><span class="check-icon">‚úì</span> Pasant√≠as en empresas como <strong>Copa, Mallol y P&G</strong></li>
                        <li><span class="check-icon">‚úì</span> Formaci√≥n global aplicada a la realidad regional</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <section class="roadmap-section">
        <div class="container">
            <div class="section-heading text-center">
                <h2>El Camino a la Rentabilidad</h2>
                <p>C√≥mo transformamos talento creativo en perfiles de alta gerencia en 4 a√±os.</p>
            </div>

            <div class="timeline-wrapper">
                <div class="timeline-step">
                    <div class="step-circle">1</div>
                    <div class="step-title">Fundamentos & Negocio</div>
                    <p class="step-desc">T√©cnica impecable + Entendimiento del mercado global.</p>
                </div>
                <div class="timeline-step">
                    <div class="step-circle">2</div>
                    <div class="step-title">Proyectos Reales</div>
                    <p class="step-desc">Trabajo con clientes reales bajo mentor√≠a experta.</p>
                </div>
                <div class="timeline-step">
                    <div class="step-circle">3</div>
                    <div class="step-title">Conexi√≥n Industrial</div>
                    <p class="step-desc">Pasant√≠as en firmas l√≠deres y networking en Ciudad del Saber.</p>
                </div>
                <div class="timeline-step">
                    <div class="step-circle">4</div>
                    <div class="step-title">Lanzamiento</div>
                    <p class="step-desc">Perfil profesional listo para facturar, emprender o liderar.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="carreras" class="careers-section">
        <div class="container">
            <div class="section-heading text-center">
                <h2>Sectores de Inversi√≥n</h2>
                <p>No elija una carrera. Elija en qu√© industria quiere que su hijo innove.</p>
            </div>

            <div class="bento-grid">
                <a href="https://isthmus.edu.pa/arquitectura" target="_blank" class="bento-card">
                    <img src="https://images.unsplash.com/photo-1486718448742-163732cd1544?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80" class="card-bg" alt="Arquitectura">
                    <div class="card-overlay"></div>
                    <div class="card-content">
                        <span class="industry-tag">Desarrollo Inmobiliario</span>
                        <h3 class="card-title">Arquitectura</h3>
                        <p class="card-desc">Del dise√±o a la rentabilidad del metro cuadrado. Urbanismo y gesti√≥n de proyectos.</p>
                        <div class="card-link-btn">Ver Plan de Estudios <span>‚Ä∫</span></div>
                    </div>
                </a>

                <a href="https://isthmus.edu.pa/diseno-industrial" target="_blank" class="bento-card">
                    <img src="https://images.unsplash.com/photo-1581093588401-fbb62a02f120?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80" class="card-bg" alt="Dise√±o Industrial">
                    <div class="card-overlay"></div>
                    <div class="card-content">
                        <span class="industry-tag">Manufactura & Tech</span>
                        <h3 class="card-title">Dise√±o Industrial</h3>
                        <p class="card-desc">Innovaci√≥n de producto. Crear patentes y directores de I+D.</p>
                        <div class="card-link-btn">Ver Plan de Estudios <span>‚Ä∫</span></div>
                    </div>
                </a>

                <a href="https://isthmus.edu.pa/arquitectura-interior" target="_blank" class="bento-card">
                    <img src="https://images.unsplash.com/photo-1618221195710-dd6b41faaea6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80" class="card-bg" alt="Arquitectura Interior">
                    <div class="card-overlay"></div>
                    <div class="card-content">
                        <span class="industry-tag">Retail & Hospitality</span>
                        <h3 class="card-title">Arquitectura Interior</h3>
                        <p class="card-desc">Consultor√≠a de experiencia. Dise√±ar espacios que aumentan ventas y productividad.</p>
                        <div class="card-link-btn">Ver Plan de Estudios <span>‚Ä∫</span></div>
                    </div>
                </a>

                <a href="https://isthmus.edu.pa/disenoycomunicacion/" target="_blank" class="bento-card">
                    <img src="https://images.unsplash.com/photo-1600607686527-6fb886090705?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80" class="card-bg" alt="Dise√±o y Comunicaci√≥n">
                    <div class="card-overlay"></div>
                    <div class="card-content">
                        <span class="industry-tag">Branding Corporativo</span>
                        <h3 class="card-title">Dise√±o y Comunicaci√≥n</h3>
                        <p class="card-desc">Estrategia de marca. Liderar la narrativa visual de empresas globales.</p>
                        <div class="card-link-btn">Ver Plan de Estudios <span>‚Ä∫</span></div>
                    </div>
                </a>
            </div>
        </div>
    </section>

    <section id="testimonios" class="testimonials-section">
        <div class="container">
            <div class="section-heading text-center">
                <h2>Historias de Retorno de Inversi√≥n</h2>
                <p>El √©xito de nuestros egresados y la tranquilidad de sus familias son nuestra mejor m√©trica.</p>
            </div>

            <div class="testimonial-grid">
                <div class="testi-card" style="background: #fff;">
                    <div>
                        <div class="quote-icon" style="color: #0066CC;">‚Äú</div>
                        <p style="font-size: 1.1rem; color: #1D1D1F; margin-bottom: 20px; font-style: italic;">
                            El networking se hace donde vas a trabajar. Hoy, antes de graduarse, mi hijo ya colabora en proyectos reales en <strong>Mallol Arquitectos</strong>. La inversi√≥n retorn√≥ antes de lo esperado.
                        </p>
                    </div>
                    <div class="author">
                        <strong style="display: block; font-size: 1rem;">Ricardo A.</strong>
                        <span style="font-size: 0.85rem; color: #86868B;">Director de Finanzas ‚Ä¢ Padre de Arquitecto</span>
                    </div>
                </div>

                <div class="testi-card" style="background: #111; color: #fff;">
                    <div>
                        <div class="quote-icon" style="color: #34C759;">‚Äú</div>
                        <p style="font-size: 1.1rem; color: #e5e5e5; margin-bottom: 20px; font-style: italic;">
                            El dise√±o industrial es ingenier√≠a de lujo. Esas bases me permitieron entrar a <strong>Puig</strong>, trabajando con est√°ndares globales. La exigencia t√©cnica de Isthmus fue mi mejor portafolio.
                        </p>
                    </div>
                    <div class="author">
                        <strong style="display: block; font-size: 1rem;">Javier M.</strong>
                        <span style="font-size: 0.85rem; color: #999;">Industrial Designer en Puig ‚Ä¢ Egresado</span>
                    </div>
                </div>

                <div class="testi-card" style="background: #fff;">
                    <div>
                        <div class="quote-icon" style="color: #0066CC;">‚Äú</div>
                        <p style="font-size: 1.1rem; color: #1D1D1F; margin-bottom: 20px; font-style: italic;">
                            Quer√≠a estabilidad para ella. Verla hoy liderando procesos de innovaci√≥n en <strong>P&G</strong> me confirma que la creatividad bien enfocada es la habilidad m√°s rentable.
                        </p>
                    </div>
                    <div class="author">
                        <strong style="display: block; font-size: 1rem;">Ana Mar√≠a V.</strong>
                        <span style="font-size: 0.85rem; color: #86868B;">Gerente de Operaciones ‚Ä¢ Madre de Egresada</span>
                    </div>
                </div>

                <div class="testi-card" style="background: #f0f0f2;">
                    <div>
                        <div class="quote-icon" style="color: #000;">‚Äú</div>
                        <p style="font-size: 1.1rem; color: #1D1D1F; margin-bottom: 20px; font-style: italic;">
                            Isthmus te quita el miedo a la escala real. La transici√≥n de las aulas a los sitios de obra de <strong>Varela</strong> fue natural. Entend√≠ c√≥mo se gestionan millones en inversi√≥n.
                        </p>
                    </div>
                    <div class="author">
                        <strong style="display: block; font-size: 1rem;">Sofia L.</strong>
                        <span style="font-size: 0.85rem; color: #86868B;">Arquitecta de Proyectos ‚Ä¢ Egresada</span>
                    </div>
                </div>

                <div class="testi-card" style="background: var(--accent-blue); color: white; justify-content: center; align-items: center; text-align: center;">
                    <h3 style="margin-bottom: 15px;">¬øQuiere conocer estos casos en persona?</h3>
                    <p style="margin-bottom: 20px; color: rgba(255,255,255,0.9);">Agende una visita guiada al campus.</p>
                    <a href="#reporte" id="trigger-agenda" onclick="openChat(event)" class="btn-main" style="width: 100%;">Agendar Visita</a>
                </div>

            </div>
        </div>
    </section>

    <section id="reporte" class="report-section">
        <div class="container">
            <div class="report-grid">
                <div class="report-text">
                    <span class="download-badge">Lead Magnet Exclusivo</span>
                    <h2 style="font-size: 3rem; margin-bottom: 20px; font-weight: 700; line-height: 1.1;">Reporte de Mercado Creativo 2030</h2>
                    <p style="font-size: 1.2rem; color: #ccc; margin-bottom: 30px;">
                        ¬øQu√© industrias est√°n contratando perfiles creativos en Panam√°? El 60% de los trabajos tradicionales desaparecer√°n. Descubra cu√°les sobrevivir√°n.
                    </p>
                    <ul style="color: #999; margin-bottom: 30px;">
                        <li style="margin-bottom: 10px;">‚Ä¢ Datos salariales actualizados (Latam y Global)</li>
                        <li style="margin-bottom: 10px;">‚Ä¢ Sectores de alta demanda 2026-2030</li>
                        <li>‚Ä¢ Casos de √©xito local</li>
                    </ul>
                </div>

                <div class="report-form-card">
                    <div id="form-container">
                        <h3 style="margin-bottom: 20px; font-size: 1.5rem;">Recibir Reporte PDF</h3>
                        <form id="lead-form" action="#" method="POST">
                            <div class="form-group">
                                <label for="parent-name">Nombre del Padre/Madre</label>
                                <input type="text" id="parent-name" name="name" class="form-input" placeholder="Ej. Roberto Mart√≠nez" required>
                            </div>
                            <div class="form-group">
                                <label for="parent-email">Correo Electr√≥nico</label>
                                <input type="email" id="parent-email" name="email" class="form-input" placeholder="Ej. roberto@empresa.com" required>
                            </div>
                            <div class="form-group">
                                <label for="student-interest">Inter√©s Principal</label>
                                <select id="student-interest" class="form-input" style="cursor: pointer;">
                                    <option value="general">A√∫n no decidimos</option>
                                    <option value="arq">Arquitectura</option>
                                    <option value="ind">Dise√±o Industrial</option>
                                    <option value="visual">Dise√±o Gr√°fico/Visual</option>
                                    <option value="interior">Interiores</option>
                                </select>
                            </div>
                            <button type="submit" id="submit-btn" class="form-btn">Descargar Reporte Ahora</button>
                        </form>
                        <p class="form-note">El PDF se enviar√° autom√°ticamente a su bandeja de entrada.</p>
                    </div>

                    <div id="success-message" class="success-message">
                        <span class="success-icon">‚úì</span>
                        <h3 style="margin-bottom: 10px;">¬°Solicitud Recibida!</h3>
                        <p style="color: #ccc; margin-bottom: 20px;">Hemos enviado el Reporte 2030 a su correo electr√≥nico. Por favor revise su bandeja de entrada.</p>
                        <button onclick="location.reload()" class="btn-main" style="background: #333; color: #fff; font-size: 0.9rem; padding: 10px 20px;">Volver</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="networking" class="networking-section">
        <div class="container networking-split">
            <div class="networking-visual">
                <img src="https://images.unsplash.com/photo-1543269865-cbf427effbad?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80" alt="Networking">
            </div>
            <div class="networking-text">
                <h2>El "qui√©n conoce" es capital puro.</h2>
                <p style="font-size: 1.2rem; color: var(--text-light); margin-bottom: 30px;">
                    Isthmus es el punto de encuentro de la pr√≥xima generaci√≥n de l√≠deres empresariales.
                </p>
                <div class="feature-item" style="margin-bottom: 20px;">
                    <h3 style="font-size: 1.2rem; margin-bottom: 5px;">Networking Elite</h3>
                    <p style="color: var(--text-light);">Sus compa√±eros de hoy son sus socios de ma√±ana en Panam√° y Latam.</p>
                </div>
                <div class="feature-item">
                    <h3 style="font-size: 1.2rem; margin-bottom: 5px;">Ecosistema Ciudad del Saber</h3>
                    <p style="color: var(--text-light);">Un entorno seguro y global donde la academia convive con la innovaci√≥n real.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="social-proof-section">
        <div class="container">
            <div class="logo-marquee">
                <div class="logo-track">
                    <span class="company-logo">Mallol</span>
                    <span class="company-logo">Copa Airlines</span>
                    <span class="company-logo">Puig</span>
                    <span class="company-logo">Dell</span>
                    <span class="company-logo">P&G</span>
                    <span class="company-logo">Varela</span>
                    <span class="company-logo">Nike</span>
                    <span class="company-logo">Gensler</span>
                    <span class="company-logo">Samsung</span>
                    <span class="company-logo">Adidas</span> 
                    <span class="company-logo">Ciudad del Saber</span>
                </div>
            </div>
        </div>
    </section>

    <section class="map-section">
        <div class="container">
            <div class="section-heading text-center">
                <h2 style="color: #fff;">Visi√≥n Sin Fronteras</h2>
                <p style="color: #999;">Que estudien en Panam√° no significa que su carrera tenga l√≠mites geogr√°ficos.</p>
            </div>
            <div class="map-wrapper">
                <div class="map-image-bg"></div>
                <div class="big-stat">
                    <div class="stat-number">42+</div>
                    <div class="stat-desc">Pa√≠ses con presencia de Egresados y Pasant√≠as</div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="logo" style="margin-bottom: 20px; display: inline-block; color: #fff;">ISTHMUS</div>
            <br>
            <div class="footer-links">
                <a href="https://isthmus.edu.pa" target="_blank">Web Oficial</a>
                <a href="https://semeocurrioalgo.com" target="_blank">Test ADN Creativo (Estudiantes)</a>
            </div>
            <p class="copyright">&copy; 2025 Isthmus. Ciudad del Saber, Panam√°.</p>
        </div>
    </footer>

    <div id="chat-shell" role="dialog" aria-modal="true">
        <openai-chatkit id="isthmus-chat" class="h-[600px] w-[360px]"></openai-chatkit>
    </div>
    <button id="chat-launcher" aria-label="Abrir chat" aria-controls="chat-shell" aria-expanded="false">üí¨</button>

    <script>
    // Funci√≥n p√∫blica para que el bot√≥n Agendar funcione
    function openChat(e) {
        if(e) e.preventDefault();
        const launcher = document.getElementById('chat-launcher');
        if(launcher) {
            launcher.click();
            console.log("Abriendo chat...");
        }
    }

    (function(){
        // CONFIGURACI√ìN
        const BACKEND_URL = "https://isthmus-production.up.railway.app"; 
        const SESSION_URL = `${BACKEND_URL}/api/chatkit/session`;
        const TOOLS_BASE  = `${BACKEND_URL}/tools`;

        const shell  = document.getElementById("chat-shell");
        const comp   = document.getElementById("isthmus-chat");
        const fab    = document.getElementById("chat-launcher");

        const key = "ck_device_id";
        let deviceId = localStorage.getItem(key);
        // Si no hay ID, lo generamos (usando el polyfill si hace falta)
        if (!deviceId) {
            if (window.crypto && window.crypto.randomUUID) {
                deviceId = window.crypto.randomUUID();
            } else {
                // Fallback de emergencia manual
                deviceId = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
                    return v.toString(16);
                });
            }
            localStorage.setItem(key, deviceId);
        }

        async function postJSON(url, payload){
            const r = await fetch(url, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(payload)
            });
            let data = {};
            try { data = await r.json(); } catch {}
            if (!r.ok) return Object.assign({ ok:false }, data, { status:r.status });
            return Object.assign({ ok:true }, data);
        }

        async function getClientSecret(current){
            const r = await fetch(SESSION_URL, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ userId: deviceId, currentClientSecret: current || null })
            });
            if (!r.ok) {
                const txt = await r.text().catch(()=> "");
                throw new Error("session "+r.status+": "+txt);
            }
            const j = await r.json();
            return j.client_secret;
        }

        // L√≥gica de Leads
        async function autoCreateLeadFromVisit(clean, noteExtra){
            const lang = (navigator.language || "es").toLowerCase().startsWith("es") ? "es" : "en";
            const payload = {
                full_name: clean?.contact?.name || "Sin nombre",
                email:      clean?.contact?.email || "",
                phone:      clean?.contact?.phone || "",
                program_interest: clean?.program_interest || "no_especificado",
                language: lang,
                source_channel: "web-carreras", 
                consent_personal_data: "yes",
                privacy_ack: "yes",
                costs_email_requested: "no",
                notes: `Lead padres: ${noteExtra||""}`.trim()
            };
            const r = await postJSON(TOOLS_BASE + "/create_lead", payload);
            return r.ok;
        }

        // Herramientas del Cliente
        async function onClientTool({ name, params }) {
            const { tool, ...clean } = params || {};

            if (name === "create_lead") {
                const missing = [];
                if (!clean.full_name)        missing.push("full_name");
                if (!clean.email)            missing.push("email");
                if (!clean.phone)            missing.push("phone");
                if (!clean.program_interest) missing.push("program_interest");
                if (!clean.consent_personal_data) missing.push("consent_personal_data");
                if (!clean.privacy_ack)          missing.push("privacy_ack");
                if (!clean.language)             missing.push("language");
                if (!clean.source_channel)       missing.push("source_channel");
                if (!clean.costs_email_requested) missing.push("costs_email_requested");
                if (missing.length) return `error:missing_${missing[0]}`;

                const resp = await postJSON(TOOLS_BASE + "/create_lead", clean);
                return resp.ok ? "create_lead: ok" : `error:${resp.error||resp.status||"lead_failed"}`;
            }

            if (name === "schedule_visit") {
                if (!clean.modality) return "error:missing_modality";
                if (!clean.preferred_dt_local) return "error:missing_preferred_dt_local";
                if (!clean.contact?.name || !clean.contact?.email || !clean.contact?.phone) {
                    return "error:missing_contact_fields";
                }
                const resp = await postJSON(TOOLS_BASE + "/schedule_visit", clean);
                const eid  = resp && resp.eventId ? ` (${resp.eventId})` : "";

                if (resp.ok) {
                    await autoCreateLeadFromVisit(clean);
                    return `schedule_visit: ok${eid}`;
                } else {
                    await autoCreateLeadFromVisit(clean, "Registro autom√°tico fall√≥; confirmar manual.");
                    return `error:${resp.error||resp.status||"visit_failed"}`;
                }
            }
            return "error:tool_not_implemented";
        }

        async function ensureReady(){
            if (!customElements.get("openai-chatkit")) {
                await customElements.whenDefined("openai-chatkit");
            }
            comp.setOptions({
                api: { getClientSecret },
                onClientTool,
                locale: "es",
                composer: { placeholder: "Preg√∫ntame por costos, requisitos o programas..." },
                startScreen: {
                    greeting: "¬°Hola! Soy el asesor virtual de ISTHMUS. ¬øEn qu√© puedo orientarte hoy?",
                    prompts: [
                        { label: "Costos y Becas", prompt: "Quiero informaci√≥n sobre costos y becas disponibles.", icon: "search" },
                        { label: "Agendar Visita", prompt: "Me gustar√≠a agendar una visita al campus.", icon: "calendar" }
                    ]
                },
                theme: {
                    colorScheme: "light",
                    color: { accent: { primary: "#0b5d3f", level: 2 } },
                    radius: "round",
                    density: "normal"
                }
            });
        }

        function showShell(show){
            shell.style.display = show ? "block" : "none";
            document.getElementById('chat-launcher').classList.toggle("hidden", show);
            document.getElementById('chat-launcher').setAttribute("aria-expanded", String(show));
        }

        let configured = false;
        document.getElementById('chat-launcher').addEventListener("click", async () => {
            try {
                const isOpen = shell.style.display === "block";
                if (isOpen) { showShell(false); return; }
                if (!configured) { await ensureReady(); configured = true; }
                showShell(true);
                if (matchMedia("(max-width:480px)").matches && !isOpen)
                    setTimeout(()=>{ if (shell.style.display !== "block") document.getElementById('chat-launcher').classList.add("hidden"); }, 5000);
            } catch (e) {
                console.error("Error al iniciar el chat:", e);
            }
        });

        window.addEventListener("unhandledrejection", (e) => {
            console.error("ChatKit error:", e.reason);
        });
    })();
    </script>

    <script>
        // L√≥gica simple para simular env√≠o de formulario (Feedback UX)
        document.getElementById('lead-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const btn = document.getElementById('submit-btn');
            const originalText = btn.innerText;
            
            // Estado de carga
            btn.disabled = true;
            btn.innerText = "Enviando solicitud...";
            btn.style.opacity = "0.7";

            // Simular espera de red (1.5 segundos)
            setTimeout(function() {
                // Ocultar formulario y mostrar √©xito
                document.getElementById('form-container').style.display = 'none';
                document.getElementById('success-message').style.display = 'block';
            }, 1500);
        });

        // Smooth Scroll para enlaces internos (Safari support extra)
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                // Si es el bot√≥n de agenda, no hacemos scroll, ya se abre el chat
                if (this.id === 'trigger-agenda') return; 

                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
                
                // Cerrar men√∫ m√≥vil si est√° abierto
                document.getElementById('mobile-menu-check').checked = false;
            });
        });
    </script>

</body>
</html>
